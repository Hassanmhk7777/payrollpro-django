<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Manuel - Gestion des Employés</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        .container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            margin-top: 20px;
            padding: 30px;
        }
        .test-card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin: 15px 0;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            border-left: 4px solid #007bff;
        }
        .btn-test {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-weight: 600;
            transition: all 0.3s;
            text-decoration: none;
            display: inline-block;
            margin: 5px;
        }
        .btn-test:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.2);
            color: white;
        }
        .status {
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 0.9em;
        }
        .status-pending { background: #fff3cd; color: #856404; }
        .status-success { background: #d4edda; color: #155724; }
        .status-error { background: #f8d7da; color: #721c24; }
        .checklist {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }
        .checklist h4 {
            color: #495057;
            margin-bottom: 15px;
        }
        .check-item {
            display: flex;
            align-items: center;
            margin: 10px 0;
            padding: 8px;
            border-radius: 5px;
            background: white;
        }
        .check-item input[type="checkbox"] {
            margin-right: 10px;
            transform: scale(1.2);
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="text-center mb-4">
            <h1 class="display-4 text-primary">
                <i class="fas fa-users"></i> Test Manuel - Gestion des Employés
            </h1>
            <p class="lead">Vérification complète de toutes les fonctionnalités</p>
        </div>

        <!-- Étape 1: Accès -->
        <div class="test-card">
            <h3><i class="fas fa-door-open text-success"></i> Étape 1: Accès à l'application</h3>
            <p>Cliquez sur le bouton ci-dessous pour ouvrir PayrollPro dans un nouvel onglet.</p>
            <div class="text-center">
                <a href="http://127.0.0.1:8000/accueil_moderne/" target="_blank" class="btn-test">
                    <i class="fas fa-external-link-alt"></i> Ouvrir PayrollPro
                </a>
            </div>
            <div class="mt-3">
                <span class="status status-pending">
                    <i class="fas fa-clock"></i> En attente de test
                </span>
            </div>
        </div>

        <!-- Étape 2: Connexion -->
        <div class="test-card">
            <h3><i class="fas fa-sign-in-alt text-info"></i> Étape 2: Connexion</h3>
            <p>Connectez-vous avec les identifiants suivants :</p>
            <div class="row">
                <div class="col-md-6">
                    <div class="alert alert-info">
                        <strong>Nom d'utilisateur:</strong> <code>admin</code><br>
                        <strong>Mot de passe:</strong> <code>admin123</code>
                    </div>
                </div>
            </div>
        </div>

        <!-- Étape 3: Navigation -->
        <div class="test-card">
            <h3><i class="fas fa-mouse-pointer text-warning"></i> Étape 3: Navigation vers Gestion des Employés</h3>
            <p>Une fois connecté, cliquez sur <strong>"Gestion des Employés"</strong> dans la barre latérale gauche.</p>
            <div class="alert alert-warning">
                <i class="fas fa-exclamation-triangle"></i> 
                <strong>Important:</strong> La section devrait se charger automatiquement avec la liste des employés et tous les boutons fonctionnels.
            </div>
        </div>

        <!-- Checklist des tests -->
        <div class="checklist">
            <h4><i class="fas fa-clipboard-check"></i> Checklist des fonctionnalités à tester</h4>
            
            <div class="check-item">
                <input type="checkbox" id="test1">
                <label for="test1">
                    <strong>Affichage de la liste des employés</strong> - Vérifiez que la liste s'affiche correctement
                </label>
            </div>
            
            <div class="check-item">
                <input type="checkbox" id="test2">
                <label for="test2">
                    <strong>Filtrage par site</strong> - Testez le dropdown "Site" et vérifiez que le filtrage fonctionne
                </label>
            </div>
            
            <div class="check-item">
                <input type="checkbox" id="test3">
                <label for="test3">
                    <strong>Filtrage par département</strong> - Testez le dropdown "Département"
                </label>
            </div>
            
            <div class="check-item">
                <input type="checkbox" id="test4">
                <label for="test4">
                    <strong>Recherche textuelle</strong> - Tapez dans le champ "Rechercher" et vérifiez le filtrage en temps réel
                </label>
            </div>
            
            <div class="check-item">
                <input type="checkbox" id="test5">
                <label for="test5">
                    <strong>Bouton "Ajouter Employé"</strong> - Cliquez et vérifiez que le modal s'ouvre
                </label>
            </div>
            
            <div class="check-item">
                <input type="checkbox" id="test6">
                <label for="test6">
                    <strong>Formulaire de création</strong> - Remplissez et soumettez le formulaire d'ajout
                </label>
            </div>
            
            <div class="check-item">
                <input type="checkbox" id="test7">
                <label for="test7">
                    <strong>Bouton "Modifier"</strong> - Cliquez sur l'icône de modification d'un employé
                </label>
            </div>
            
            <div class="check-item">
                <input type="checkbox" id="test8">
                <label for="test8">
                    <strong>Bouton "Supprimer"</strong> - Testez la suppression d'un employé (avec confirmation)
                </label>
            </div>
            
            <div class="check-item">
                <input type="checkbox" id="test9">
                <label for="test9">
                    <strong>Export Excel</strong> - Cliquez sur "Export Excel" et vérifiez le téléchargement
                </label>
            </div>
            
            <div class="check-item">
                <input type="checkbox" id="test10">
                <label for="test10">
                    <strong>Bouton "Actualiser"</strong> - Testez le rechargement de la liste
                </label>
            </div>
        </div>

        <!-- Instructions spéciales -->
        <div class="test-card">
            <h3><i class="fas fa-exclamation-circle text-danger"></i> En cas de problème</h3>
            <div class="row">
                <div class="col-md-6">
                    <h5>Si les boutons ne fonctionnent pas :</h5>
                    <ol>
                        <li>Appuyez sur <kbd>F12</kbd> pour ouvrir la console</li>
                        <li>Vérifiez s'il y a des erreurs JavaScript</li>
                        <li>Actualisez la page avec <kbd>Ctrl+F5</kbd></li>
                        <li>Fermez et rouvrez l'onglet</li>
                    </ol>
                </div>
                <div class="col-md-6">
                    <h5>Pour forcer le rechargement :</h5>
                    <ol>
                        <li>Ouvrez la console (<kbd>F12</kbd>)</li>
                        <li>Tapez: <code>loadSectionContent('employees')</code></li>
                        <li>Appuyez sur <kbd>Entrée</kbd></li>
                    </ol>
                </div>
            </div>
        </div>

        <!-- Résultats -->
        <div class="test-card">
            <h3><i class="fas fa-chart-bar text-success"></i> Résultats du test</h3>
            <div id="progress-container">
                <div class="d-flex justify-content-between align-items-center mb-2">
                    <span>Progression:</span>
                    <span id="progress-text">0/10 tests complétés</span>
                </div>
                <div class="progress" style="height: 20px;">
                    <div class="progress-bar" id="progress-bar" role="progressbar" style="width: 0%"></div>
                </div>
            </div>
            
            <div class="mt-3">
                <button class="btn btn-success" onclick="generateReport()" id="report-btn" disabled>
                    <i class="fas fa-file-alt"></i> Générer le rapport
                </button>
            </div>
            
            <div id="final-report" style="display: none;" class="mt-3 p-3 border rounded">
                <!-- Le rapport sera généré ici -->
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Gestion de la progression
        function updateProgress() {
            const checkboxes = document.querySelectorAll('input[type="checkbox"]');
            const checked = document.querySelectorAll('input[type="checkbox"]:checked');
            const progress = (checked.length / checkboxes.length) * 100;
            
            document.getElementById('progress-bar').style.width = progress + '%';
            document.getElementById('progress-text').textContent = checked.length + '/' + checkboxes.length + ' tests complétés';
            
            // Activer le bouton de rapport si tout est complété
            document.getElementById('report-btn').disabled = checked.length < checkboxes.length;
        }

        // Ajouter des listeners aux checkboxes
        document.querySelectorAll('input[type="checkbox"]').forEach(checkbox => {
            checkbox.addEventListener('change', updateProgress);
        });

        // Générer le rapport final
        function generateReport() {
            const checkboxes = document.querySelectorAll('input[type="checkbox"]');
            const checked = document.querySelectorAll('input[type="checkbox"]:checked');
            
            let reportHtml = '<h4><i class="fas fa-clipboard-list"></i> Rapport de test final</h4>';
            reportHtml += '<p><strong>Date:</strong> ' + new Date().toLocaleString() + '</p>';
            reportHtml += '<p><strong>Tests réussis:</strong> ' + checked.length + '/' + checkboxes.length + '</p>';
            
            if (checked.length === checkboxes.length) {
                reportHtml += '<div class="alert alert-success"><i class="fas fa-check-circle"></i> <strong>Félicitations!</strong> Tous les tests sont passés. La gestion des employés fonctionne parfaitement.</div>';
            } else {
                reportHtml += '<div class="alert alert-warning"><i class="fas fa-exclamation-triangle"></i> <strong>Tests incomplets.</strong> Certaines fonctionnalités n\'ont pas été testées.</div>';
            }
            
            reportHtml += '<h5>Détail des tests:</h5><ul>';
            checkboxes.forEach((checkbox, index) => {
                const label = checkbox.nextElementSibling.textContent;
                const status = checkbox.checked ? '✅' : '❌';
                reportHtml += '<li>' + status + ' ' + label + '</li>';
            });
            reportHtml += '</ul>';
            
            document.getElementById('final-report').innerHTML = reportHtml;
            document.getElementById('final-report').style.display = 'block';
        }

        // Message d'accueil
        console.log('🎯 Page de test manuel chargée');
        console.log('📋 Suivez les étapes pour tester la gestion des employés');
    </script>
</body>
</html>
